<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Coding with Honour]]></title>
  <link href="http://blog.samstokes.co.uk/atom.xml" rel="self"/>
  <link href="http://blog.samstokes.co.uk/"/>
  <updated>2014-03-10T04:05:02+00:00</updated>
  <id>http://blog.samstokes.co.uk/</id>
  <author>
    <name><![CDATA[Sam Stokes]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Early Afternoon Serendipity]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2010/10/20/early-afternoon-serendipity-rainbow-uplighting/"/>
    <updated>2010-10-20T13:08:19+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/1358591858</id>
    <content type="html"><![CDATA[<p>Rainbow uplighting.</p>
<img src="http://blog.samstokes.co.uk/tumblr_files/tumblr_lalb5wfGag1qarkt9o1.jpg"/>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Inception Isn't Science Fiction (Spoilers!)]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2010/08/01/inception-isnt-science-fiction-spoilers/"/>
    <updated>2010-08-01T23:25:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/890499536</id>
    <content type="html"><![CDATA[<p><a href="http://halphillips.tumblr.com/post/822919795/inception"
class="tumblr_blog">This</a> is an insightful analysis of <em>Inception</em>, but I think it doesn&#8217;t go far enough.</p>

<h1>Spoilers below</h1>

<p><img src="http://farm4.static.flickr.com/3424/3380212745_b7d0270bbd_b.jpg" alt="OMFG huge spoilers" title="OMFG huge spoilers"/></p>

<!-- more -->

<p>Hal&#8217;s interpretation of <em>Inception</em>&#8217;s ambiguous ending is that the whole film is Cobb&#8217;s dream, and that the titular &#8220;inception&#8221; is convincing Cobb that he has to move past his guilt (&#8220;Non, je ne regrette rien&#8221;).  He suggests that in the true reality, which we never see in the film, Ariadne attempts to perform this inception on Cobb, with presumably therapeutic motivations.  I think if you take this interpretation a little further, you get a much more satisfying answer.</p>

<p>The whole premise of the film is a technology which allows a sleeping person to enter another&#8217;s dream and interact with them. The dream-sharing technology is given a hasty introduction halfway through the film (&#8220;the military developed it for combat training&#8221;) and never explained.  There&#8217;s nothing wrong with that - plenty of science fiction movies depend on some hokey tech to make their cool settings or plotlines possible - but to me it does stick out as an oddity.</p>

<p>All the other fantastic elements of <em>Inception</em> - zero-gee fistfights, tops that spin forever, bending Paris in on itself - take place in dreams, so we don&#8217;t think to question them.  Like science fiction films, dreams often take place in the context of some absurd premise which you accept as perfectly natural and obvious.  You&#8217;ve got to get somewhere, but you&#8217;re on the wrong train, and you&#8217;re going to be late - only when you wake up do you realise you don&#8217;t even remember where you needed to go.  Or you can fly and shoot lasers from your hands, and of course you can, because how else could you save the world from the evil killer wasps?  Fantasy in dreams is normal, familiar and obvious during the dream, and fantastic only when you wake up.  But <em>Inception</em> asks us to suspend disbelief that dream-sharing is possible.</p>

<p>Wait a second&#8230;</p>

<p>If the whole film is Cobb&#8217;s dream, then the one piece of science fiction, the nebulous dream-sharing technology, on which the whole plot depends but is never properly explained&#8230; is just part of the dream!</p>

<p><em>Inception</em> isn&#8217;t a science fiction adventure where people can invade each other&#8217;s dreams and plant secrets in their minds.  It&#8217;s a chronicle of <em>Cobb&#8217;s dream</em>, which <em>is</em> a science fiction adventure.  Dream-sharing, extractors, architects, the sinister corporation chasing him - they don&#8217;t have to actually exist, because they&#8217;re all figments of Cobb&#8217;s imagination!</p>

<p>So, my own interpretation of <em>Inception</em>: Cobb&#8217;s flashbacks of his kids and of his wife&#8217;s life and death are idealised glimpses of the <em>real</em> real world, which we don&#8217;t otherwise see in the film.  He has very real issues to deal with.  He&#8217;s also apparently been watching <em>The Matrix</em> a lot, because when he dreams, his subconscious chooses to frame his issues in an epic struggle against faceless oppression with reality-bending special effects.  Sure, it&#8217;s elaborate and intricate even by dream standards, but Cobb&#8217;s <em>really</em> messed up.</p>

<p>The &#8220;inception team&#8221; - Ariadne, Arthur, Saito and the rest - are simply projections of Cobb&#8217;s subconscious; their purpose is to force him to confront those aspects of his memories and emotions he can&#8217;t face up to while awake.  His revelation in the cottage on top of the skyscraper is real: that clinging to his guilt is what is keeping him from his children.  That&#8217;s the climax of the movie because that&#8217;s where his subconscious was trying to get him all along.  Cobb is performing inception <em>on himself</em>.</p>

<p>If you&#8217;re not yet convinced that all the characters are simply created by Cobb&#8217;s unconscious mind, look at Ariadne - named for the woman who gave Theseus the tools he needed to slay the dreaded Minotaur, and then escape from the Labyrinth that is its lair.  The first thing Cobb asks of her is to <em>design</em> a maze which he can&#8217;t find his way out of: he must surround his guilt - the Minotaur - in a Labyrinth before he can slay it.  She leads him to the confrontation, gives him the strength to win, then shows him the way back out.</p>

<p>This interpretation feels pretty satisfying to me.  It doesn&#8217;t seem to have any holes.  Anything is possible in a dream, and indeed noticing strange inconsistencies and inaccuracies after you &#8220;wake up&#8221; (leave the cinema) is a familiar feeling.  And the way the film both refers to and represents itself is a hallmark of Nolan&#8217;s films: see for example <em>The Prestige</em>, which illustrates the mystery and allure of stage magic by performing an elaborate feat of misdirection on the viewer, who - Nolan asserts - &#8220;wants to be fooled&#8221;.  Dreams are so powerful because we fool ourselves.</p>

<p>Tell me why I&#8217;m wrong in the comments.</p>

<hr><p>Spoiler photo credit: <a href="http://www.flickr.com/photos/charlo_be/3380212745/">charlo.be on Flickr</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim Wizardry #1]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2010/07/04/vim-wizardry-1/"/>
    <updated>2010-07-04T03:24:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/767636740</id>
    <content type="html"><![CDATA[<p>(I wrote this as a <a href="http://news.ycombinator.com/item?id=1485009">response</a> to an Ask Hacker News <a href="http://news.ycombinator.com/item?id=1484061">post about learning Vim</a>, but I thought it deserved a life of its own.)</p>

<p>This is one of my favourite Vim features.  Say you have the following code:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>do_something_with(some + long * complicated * expression)
</span><span class='line'>                           ^</span></code></pre></td></tr></table></div></figure>

<p>Say your cursor is where the caret indicates.  Typing <code>ci)</code> (&#8220;change inside parens&#8221;) in normal mode will:</p>

<ul><li>delete all the text between the two matching parens</li>
<li>place you in insert mode with the cursor between the two (now adjacent) parens</li>
<li>put the deleted text in the yank buffer so that <code>p</code> will paste it.</li>
</ul><p>The use case here is obviously so you can assign a name to that long complicated expression.  <code>ci)</code> is much easier than selecting it with the mouse, and keeps your hands on the keyboard where they belong ;)</p>

<!-- more -->

<p>With nested parentheses, it does what you expect (affects the text contained by the innermost matching pair to contain your cursor - try it and see).</p>

<p>Other equally useful variants:</p>

<ul><li><code>i"</code> - &#8220;inside double quotes&#8221; - everything between double quotes</li>
<li><code>i'</code> - &#8220;inside single quotes&#8221;</li>
<li><code>iw</code> - &#8220;inside word&#8221; - the word the cursor is on</li>
<li><code>is</code> - &#8220;inside sentence&#8221; - great for editing prose</li>
<li><code>ip</code> - &#8220;inside paragraph&#8221;</li>
</ul><p>There are also similar motions beginning with &#8220;a&#8221;:</p>

<ul><li><code>a)</code> - like <code>i)</code> but includes the parens (e.g. <code>da)</code> deletes everything inside parens and the parens themselves)</li>
<li><code>a"</code> - similarly</li>
<li><code>aw</code> - like <code>iw</code> but includes trailing whitespace.</li>
</ul><p>For another great taste that goes great with this, see the <a href="http://www.vim.org/scripts/script.php?script_id=1697">surround.vim</a> plugin.  To whet your appetite: six keystrokes to wrap your current selection in &lt;div&gt; tags; four to change a string from &#8220;double-quoted&#8221; to &#8216;single-quoted&#8217;.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Please Demand Debate on the Digital Economy Bill]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2010/03/21/please-demand-debate-on-the-digital-economy-bill/"/>
    <updated>2010-03-21T18:03:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/463663523</id>
    <content type="html"><![CDATA[<!--
vim:ft=mkd
-->

<p>Don&#8217;t let the Government rush draconian internet laws through Parliament before the election: <a href="http://www.38degrees.org.uk/page/speakout/extremeinternetl">write to your MP</a>!  I did.</p>

<!-- more -->

<p>(<a href="http://blog.samstokes.co.uk/2009/11/17/on-three-strikes-email-to-my-mp.html">Others</a> in this <a href="http://blog.samstokes.co.uk/2009/11/30/why-the-digital-economy-bill-is-flawed.html">series</a>.)</p>

<blockquote>
  <p>Dear Meg Hillier,</p>
  
  <p>Thank you for your thoughtful response of 17 December regarding the Digital
  Economy Bill.  I appreciate your taking my concerns on board, and indicating
  that you shared some of them.</p>
  
  <p>I&#8217;m writing today to ask you to demand a full Commons debate on this highly
  controversial Bill, and not to support Government plans to rush it into law
  before the election.</p>
  
  <p>In our previous correspondence, I told you about my concerns about the measures
  in the Bill to tackle illegal file-sharing: that besides their intended effect
  of incentivising creation, these measures would</p>
  
  <ol><li><p>stifle the UK&#8217;s digital businesses (including my own software consulting
  business, and the businesses of my clients) by creating a restrictive and
  uncertain legal environment;</p></li>
  <li><p>damage British social justice, by exacting disproportionate penalties on a
  potentially huge number of citizens (and voters), without a required standard
  of evidence or right to redress for false accusation (points with which you
  indicated you shared my concern), and without a court trial or presumption of
  innocence; and</p></li>
  <li><p>harm British democracy, by building in &#8220;reserve powers&#8221; for unelected
  officials to change copyright law without Parliamentary scrutiny, and by
  allowing massive and largely evidence-free lobbying from special interest
  groups to unduly influence the legislation.</p></li>
  </ol><p>Especially in light of point 3 above, I have been extremely concerned to read
  in the press that the Government is likely to force the Bill into law before
  the upcoming election.  It is disturbing that the Government would deny MPs the
  chance to fully consider the implications.  It is downright scary that crucial
  details of the most controversial proposals might be worked out behind closed
  doors in the &#8220;wash-up&#8221;.</p>
  
  <p>As a constituent, I am writing to you today to ask you to do all you can
  to ensure the Government doesn&#8217;t just rush the bill through and deny us our
  democratic right to scrutiny and debate.</p>
  
  <p>There is no evidence that the need is so pressing as to justify passing bad
  laws.  The content industry lobbyists asking for this hasty lawmaking claim
  that they urgently need the measures in the Bill to keep their industry alive.
  This is an extraordinary claim in light of recent news that, in the midst of a
  recession, <a href="http://news.bbc.co.uk/1/hi/business/8567099.stm" title="Online music royalties up by 73% in 2009, according to PRS for Music">online music revenues <em>grew</em> by 73%</a>!  The sky is clearly not
  falling.</p>
  
  <p>The concerns raised by myself and many others are still largely unaddressed,
  despite the large number of amendments proposed during the debate in the Lords
  (itself evidence of the importance and contentious nature of this Bill).  The
  proposed legislation will still fail to support authors of copyrighted works,
  and it will still do great harm to Britain&#8217;s digital economy.</p>
  
  <p>I apologise for extending this already long letter, but I would like to close
  by quoting from a <a href="http://www.labourlist.org/digital-bill-a-wise-move-lisa-ansell" title='"The Digital Economy Bill: A wise move?"'>post written today on the LabourList blog</a>:</p>
  
  <blockquote>
    <p>The bill which is supposed to provide the structure for Britain’s digital
    future, is currently being opposed by the internet service provders who are
    central to that future – not because they are worried about their profits,
    but because they don&#8217;t want to police their customers in this way, especially
    not on the basis of an assumption that has not been proved. Consumers are
    worried that this clause could have serious effects on their lives. Consumers
    vote.</p>
    
    <p>Is this clause so important that it is necessary to push it through at any
    cost? Is it really wise to have this bill become an easily recalled symbol of
    Labour&#8217;s record on civil liberties, and a &#8216;sidestepping&#8217; of democratic
    process?  This close to this election?</p>
  </blockquote>
  
  <p>Once again, please demand a full democratic debate on the Digital Economy Bill.</p>
  
  <p>Yours sincerely,</p>
  
  <p>Sam Stokes</p>
</blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Genesis of a Building]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2010/02/16/the-genesis-of-a-building-witnessing-this-is/"/>
    <updated>2010-02-16T18:01:57+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/393068588</id>
    <content type="html"><![CDATA[<p>Witnessing this is pretty cool from a “making things” point of view.  Shame
it’s happening right outside our flat.</p>
<img src="http://blog.samstokes.co.uk/tumblr_files/tumblr_kxy4r9nBk11qarkt9o1.jpg"/>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Limerick Lisp-style]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/12/07/limerick-lisp-style/"/>
    <updated>2009-12-07T09:18:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/272996560</id>
    <content type="html"><![CDATA[<p>In honour of the <a href="http://skillsmatter.com/event/cloud-grid/functional-programming-exchange-2009">Functional Programming eXchange</a>, on a bus to which I am writing this.</p>

<pre>
 (a (program (writtenp :in 'lisp))
     (may 'be (and (simple) (elegant) (crisp)))
     (but (cry '(C pros) "too *fancy();"
             "for (i; simply(); &amp;cant++ + ++see)"
             "{ the code; for (;;) { the parenthesis; } }")))
</pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My First Manhattan]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/12/04/my-first-manhattan/"/>
    <updated>2009-12-04T23:23:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/269546347</id>
    <content type="html"><![CDATA[<img src="http://blog.samstokes.co.uk/tumblr_files/tumblr_ku5iahSPmB1qarkt9.jpg"/>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Made Enchiladas]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/12/03/made-enchiladas/"/>
    <updated>2009-12-03T01:44:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/266994355</id>
    <content type="html"><![CDATA[<img src="http://blog.samstokes.co.uk/tumblr_files/tumblr_ku1zhvrOHh1qarkt9.jpg"/>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why the Digital Economy Bill Is Flawed]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/11/30/why-the-digital-economy-bill-is-flawed/"/>
    <updated>2009-11-30T14:38:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/263522599</id>
    <content type="html"><![CDATA[<p><!--
vim:ft=mkd
-->
My MP, <a href="http://www.theyworkforyou.com/mp/meg_hillier/hackney_south_and_shoreditch">Meg Hillier</a>, was kind enough to respond by post to my <a href="http://blog.samstokes.co.uk/2009/11/17/on-three-strikes-email-to-my-mp.html">email</a> about the proposed &#8220;three strikes&#8221; legislation in the UK.  The main content of her response was to forward me a letter she received from <a href="http://www.theyworkforyou.com/mp/stephen_timms/east_ham">Stephen Timms</a>, the Minister for Digital Britain (his actual job title, I&#8217;m not making this up), to &#8220;clarify the Government&#8217;s position on this issue&#8221;.</p>

<p>The forwarded letter mostly just rattled off the party line - illegal file sharing is illegal, artists need to be compensated, the usual unjustified claims of urgency - but it did mention the recent report by the <a href="http://www.ipo.gov.uk">UK Intellectual Property Office</a>, awkwardly entitled <a href="http://www.ipo.gov.uk/pro-types/pro-copy/c-policy/c-strategy.htm" title='"© The Way Ahead" - UK Intellectual Property Office, 28th October 2009'>© The Way Ahead</a>, which is actually pretty encouraging reading: I will discuss it in a separate post soon.</p>

<p>My <a href="http://blog.samstokes.co.uk/2009/11/17/on-three-strikes-email-to-my-mp.html">previous email</a> focused on problems with the &#8220;three strikes&#8221; approach.  Since the Digital Economy Bill was published we&#8217;ve discovered that &#8220;three strikes&#8221; is only one of <a href="http://blogscript.blogspot.com/2009/11/mandy-and-me-some-thoughts-on-digital.html" title="Lilian Edwards discusses in more detail the problems with the Bill">several nasty tricks up Mandy&#8217;s sleeve</a>.  Therefore, and because I felt from her letter that Ms Hillier hadn&#8217;t really taken my concerns on board, I wrote back.</p>

<!-- more -->

<p><em>Update 2009/12/02</em> - since the Digital Economy Bill is currently being debated in the House of Lords, I also sent an edited version of this email yesterday to <a href="http://www.theyworkforyou.com/search/?s=digital+economy&amp;pid=13517&amp;wtt=2">Lord Clement-Jones</a>, who is taking part in this afternoon&#8217;s Second Reading debate.</p>

<blockquote>
  <p>Dear Ms Hillier,</p>
  
  <p>Thank you very much for your swift response to my email of 17th November.  Thank you also for forwarding a copy of Stephen Timms&#8217; letter outlining the Government&#8217;s position, reasoning and intentions regarding illegal filesharing.  I am grateful to him for drawing my attention to the UK Intellectual Property Office&#8217;s report <a href="http://www.ipo.gov.uk/pro-types/pro-copy/c-policy/c-strategy.htm" title='"© The Way Ahead" - UK Intellectual Property Office, 28th October 2009'>© The Way Ahead</a>, which I have read with interest.</p>
  
  <p>Unfortunately, Mr Timms&#8217; letter does not reassure me.  On the contrary, it reinforces my perception that the policies set out in the Government&#8217;s Digital Economy Bill were drafted in haste, based on the shrill lobbying of special interests rather than empirical evidence and objective reasoning.</p>
  
  <p>I do not believe the available evidence justifies imposing technical sanctions on internet users without trial in court, as the Government proposals would allow.  The UKIPO report, published only a month ago, finds that <a href="http://www.ipo.gov.uk/pro-types/pro-copy/c-policy/c-strategy.htm" title="UKIPO report, page 16, paragraph 19">&#8220;a lack of strong evidence across the world makes it difficult to establish the case for changes to aspects of copyright law and practice&#8221;</a>.  <a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1227762" title='"The Economics of Copyright Law: A Stocktake of the Literature" - Towse, Handke &amp; Stepan, August 2008'>Meta-analyses of the economic literature</a> have similarly observed a poor quality of available evidence and a lack of consensus.</p>
  
  <p>Mr Timms&#8217; letter does not even include the word &#8220;evidence&#8221;; I note with concern that this omission seems to be typical of Government communications on this topic.</p>
  
  <p>This is not the only thing wrong with the Digital Economy Bill.  I wrote my previous email before the Bill was published.  Since then I have read with alarm section 17, which grants the Secretary of State power to amend by statutory instrument the Copyright, Designs and Patents Act of 1988 &#8220;if it appears to the Secretary of State appropriate to do so&#8221;.  To grant such broad powers to an unelected official is incredible, undemocratic and indefensible.</p>
  
  <p>I acknowledge the problem this &#8220;power to amend&#8221; is designed to tackle: technology changes too quickly for primary legislation to keep up.  However, the case has not been made that this justifies circumventing the democratic process, especially in such an important and controversial area as copyright law.  To me it rather suggests, <a href="http://www.ipo.gov.uk/pro-types/pro-copy/c-policy/c-strategy.htm" title='UKIPO report, page 47, paragraph 6: "[the Government] wishes copyright to develop in a technologically-neutral way"'>to paraphrase the UKIPO report</a>, that Parliament should amend copyright law to be more technologically neutral.</p>
  
  <p>Therefore I once again urge you to reject the Digital Economy Bill unless it is substantially amended, including the removal of section 17, and the addition of a guarantee of trial in court before technical limitations can be imposed on internet users.  I would also appreciate it if you could pass on my concerns to the Minister responsible for the Bill, for example by forwarding him this email.</p>
  
  <p>I am sure that, as a Government minister, you will be under considerable party pressure to support this Bill, and that I am unlikely to convince you.  However, I must reiterate that I will not vote for any MP or party who does support it, nor will many of my personal and professional acquaintances.</p>
  
  <p>Finally, I would like to inform you that I am publishing my emails to you on <a href="http://blog.samstokes.co.uk">my blog</a>, where my <a href="http://blog.samstokes.co.uk/2009/11/17/on-three-strikes-email-to-my-mp.html">previous email</a> has been read by over 70 people at time of writing.  With your permission, I would like to include your responses in these blog posts.</p>
  
  <p>Thank you again for reading this email.</p>
  
  <p>Yours sincerely,</p>
  
  <p>Sam Stokes</p>
</blockquote>

<h2>Update 2009/12/14: response</h2>

<p>Meg Hillier sent a brief reply to this email, stating that she supports the Digital Economy Bill because &#8220;filesharing has a big impact on people&#8217;s livelihoods&#8221;.  This is a disappointing response, as it basically ignores the content of this second email.  I will continue the correspondence, but as this blog is already more politics-heavy than I intended, I will stop publishing my emails unless there is a noteworthy development.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Regex Style in Ruby]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/11/20/regex-style-in-ruby/"/>
    <updated>2009-11-20T22:03:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/251167556</id>
    <content type="html"><![CDATA[<!--
vim:ft=mkd
-->

<p>Reading Patrick McKenzie&#8217;s excellent <a href="http://www.kalzumeus.com/2009/11/17/practical-metaprogramming-with-ruby-storing-preferences/">practical example of metaprogramming</a>, I came across a line of code I didn&#8217;t understand:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">caller</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="sr">/`([^&#39;]*)&#39;/</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>That line taught me three new things about Ruby:</p>

<!-- more -->

<ol><li>The syntax for the subscript operator <code>[]</code> allows multiple arguments.  (It turns out I already knew this in another context: <code>[1,1,2,3,5,7][2,3] =&gt; [2,3,5]</code>)</li>
<li>You can subscript a String with a Regexp, returning the first match: <code>"goal"[/[aeiou]/] =&gt; "o"</code> (<code>nil</code> is returned if there is no match).</li>
<li>If you throw in an index <code>n</code>, then you get the <code>n</code>th capturing group of the first match: <code>"xaabb"[/(.)\1/, 1] =&gt; "a"</code> (or <code>nil</code> again if no match).</li>
</ol><p>That last one is interesting, because it means there&#8217;s a concise way I didn&#8217;t previously know about to achieve a common regex task: checking if an input string matches a given format, and if so, extracting part of the format.  Say we want to pull out the domain from an email address, but complain if we can&#8217;t find it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="s2">&quot;foo@example.com&quot;</span><span class="o">[</span><span class="sr">/@(.*)/</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span> <span class="ow">or</span> <span class="k">raise</span> <span class="s2">&quot;bad email&quot;</span>
</span><span class='line'><span class="c1"># =&amp;gt; &quot;example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Before learning this trick I would have either used a temporary match object <a href="http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html"><em>a la</em> Java</a>, or gritted my teeth and used a global variable Perl-style:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">match</span> <span class="o">=</span> <span class="sr">/@(.*)/</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;foo@example.com&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">if</span> <span class="n">match</span>
</span><span class='line'>  <span class="n">match</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="k">raise</span> <span class="s2">&quot;bad email&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># =&amp;gt; &quot;example.com&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="s2">&quot;foo@example.com&quot;</span> <span class="o">=~</span> <span class="sr">/@(.*)/</span>
</span><span class='line'>  <span class="vg">$1</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="k">raise</span> <span class="s2">&quot;bad email&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># =&amp;gt; &quot;example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Both of those seem rather verbose.  They can be <a href="http://www.flickr.com/photos/trojanguy/3575375564/">golfed</a> into one-liners, but the readability starts to suffer:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vg">$1</span> <span class="k">if</span> <span class="s2">&quot;foo@example.com&quot;</span> <span class="o">=~</span> <span class="sr">/@(.*)/</span> <span class="ow">or</span> <span class="k">raise</span> <span class="s2">&quot;bad email&quot;</span> <span class="c1"># =&amp;gt; &quot;example.com&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;andand&#39;</span>
</span><span class='line'><span class="sr">/@(.*)/</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;foo@example.com&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">andand</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="c1"># =&amp;gt; &quot;example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>So I&#8217;m left wondering what&#8217;s the most readable and/or idiomatic style for regexes in Ruby.  TMTOWTDI indeed!  Even now I know what it means, <code>"xaabb"[/(.)\1/,1]</code> makes me double-take slightly - it&#8217;s an unusual way to use <code>[]</code> - but I guess it&#8217;s just another Ruby idiosyncracy I&#8217;ll come to know and love.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[On "Three Strikes": Email to My MP]]></title>
    <link href="http://blog.samstokes.co.uk/blog/2009/11/17/on-three-strikes-email-to-my-mp/"/>
    <updated>2009-11-17T18:18:00+00:00</updated>
    <id>http://blog.samstokes.co.uk/post/247434685</id>
    <content type="html"><![CDATA[<!--
vim:ft=mkd
-->

<p>An email I wrote to <a href="http://www.theyworkforyou.com/mp/meg_hillier/hackney_south_and_shoreditch">my MP</a> (using the very handy <a href="http://www.writetothem.com/">WriteToThem</a>) regarding the UK Government&#8217;s so-called &#8220;three strikes&#8221; proposals to combat illegal filesharing.</p>


<!-- more -->


<blockquote>
<p>Dear Ms Hillier,</p>
<p>I am writing to ask you to vote against the Government&#8217;s forthcoming Digital Economy Bill, unless the currently proposed measures to impair or disconnect without trial the internet connections of those accused of illegal filesharing are removed from said Bill.</p>
<p>Copyright holders are already entitled to initiate private lawsuits against those they believe to be infringing their rights.  This of course involves a trial in court, with the accused party presumed innocent until proven guilty.  <a target="_blank" href="http://dmca.cs.washington.edu/">Methods of detecting infringement are known to be unreliable, leading to false accusations</a>, but currently this is the accuser&#8217;s problem.</p>
<p>The Government&#8217;s plans would remove the inconvenient (to the rights holder) need for a court case to punish the accused.  The unreliability of detection would become an issue for every internet user, since these plans do not require proof of infringement, only repeated accusation.</p>
<p>This circumvention of justice is justified only by evidence produced by the rights holders themselves.  It ignores evidence that <a target="_blank" href="http://labs.timesonline.co.uk/blog/2009/11/12/do-music-artists-do-better-in-a-world-with-illegal-file-sharing/">the music industry has actually grown over the last five years</a>, and that <a target="_blank" href="http://www.independent.co.uk/news/uk/crime/illegal-downloaders-spend-the-most-on-music-says-poll-1812776.html">filesharing may be an opportunity for the content industries rather than a threat</a>.</p>
<p>I am also very concerned about the precedent that would be set by these proposals.  Music and film are not the only industries whose business models have been shaken by the emergence of new technology.  The news industry, for example, is considering charging for its previously free online content.  Without question people will find ways to circumvent these &#8220;paywalls&#8221; and access the content for free.  Will we then allow news publishers to join in selecting people for disconnection?  I myself, as an independent software developer, am a creator of copyrighted works.  Can I disconnect people I believe have used my work without permission?  If not, why can the BPI do it but not me?</p>
<p>I believe the Government&#8217;s plans to be short-sighted in conception, wrong in principle, and likely in practice to do more harm than good.  I will vote against any politician who supports them.</p>
<p>I also ask you to sign <a target="_blank" href="http://edmi.parliament.uk/EDMi/EDMDetails.aspx?EDMID=39226">Early Day Motion 1997</a>, which echoes many of these sentiments.</p>
<p>Thank you for reading.</p>
<p>Yours sincerely,</p>
<p>Sam Stokes</p>
</blockquote>

<h2>Update 2009/12/02: response</h2>

<p>Ms Hillier was kind enough to respond by post to my email.  I will not reproduce her response here, as she has not given her consent to publish it; however I have blogged about <a href="http://blog.samstokes.co.uk/2009/11/30/why-the-digital-economy-bill-is-flawed.html">the further email I sent in reply</a>.</p>

<p>Since the Digital Economy Bill was <a href="http://www.publications.parliament.uk/pa/ld200910/ldbills/001/10001.i-ii.html">published</a> between my first email and my second, the latter <a href="http://blog.samstokes.co.uk/2009/11/30/why-the-digital-economy-bill-is-flawed.html">brings up some new points</a>, in particular regarding the lack of evidence to justify these measures and the broad powers to be given to the Secretary of State.</p>
]]></content>
  </entry>
  
</feed>
